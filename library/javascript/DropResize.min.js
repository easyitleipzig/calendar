const store=function(t,e=!1){if(e)return function t(){return this.storeValue}();!function t(e){this.storeValue=e}(t)};function draggable(t){"object"==typeof t||(t=nj().els("#"+t)),t.classList.add("draggable");let e=t.id.replace("_box",""),o=nj().els("#"+e+"_headline");o.className="dragPoint";let i=t.firstChild;if(null!==i?t.insertBefore(o,i):t.appendChild(o),t.classList.contains("resizable")){let n=t.parentElement;n.classList.contains("parentResize")&&(resizePointsStyling(t,o),t=n)}o.onmousedown=function(){1==event.which&&trackMouseDragPlusAction({action:"drag",param:[t]})}}function getDragNewPosition(t,e){let o=getElementOffsetAndMeasures(t),i={x:o.left-e.x,y:o.top-e.y};return preventDragOutsideScreen(o,i,{left:i.x,top:i.y,right:i.x+o.width,bottom:i.y+o.height})}function getElementOffsetAndMeasures(t){return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth}}function preventDragOutsideScreen(t,e,o){let i=getDocumentBodyLimits();return o.left<i.left&&(e.x=t.left),o.top<i.top&&(e.y=t.top),o.right>i.right&&(e.x=t.left),o.bottom>i.bottom&&(e.y=t.top),e}function dragAction(t,e){let o=getDragNewPosition(t.param[0],e);store(o),t.param[0].style.left=o.x+"px",t.param[0].style.top=o.y+"px"}function getItemCountToFitElementByWidth(t,e){if(null!=t){let o=e.clientWidth,i=window.getComputedStyle(t),n=parseInt(i.getPropertyValue("width").slice(0,-2)),r=parseInt(i.getPropertyValue("margin-left").slice(0,-2)),l=parseInt(i.getPropertyValue("margin-right").slice(0,-2));return Math.floor(o/(elementWidth=n+r+l))}}function getButton(t,e){let o;console.log(t,e);for(let i=0,n=(o=t.classList.contains("draggable")?t.firstElementChild.firstElementChild.childNodes:t.firstElementChild.childNodes).length;i<n;i++)if(o[i].classList.contains(e))return o[i]}function getElementSizeAndPosition(t){let e=window.getComputedStyle(t);return{width:e.getPropertyValue("width"),height:e.getPropertyValue("height"),top:e.getPropertyValue("top"),left:e.getPropertyValue("left"),gridCol:e.getPropertyValue("grid-template-columns"),gridRow:e.getPropertyValue("grid-template-rows")}}function getDocumentBodyLimits(){return{left:0,right:document.body.clientWidth,top:0,bottom:document.body.clientHeight}}function trackMouseDragPlusAction(t){let e=event.clientX,o=event.clientY;document.onmouseup=dragMouseStop,document.onmousemove=function(){let i=event.clientX,n=event.clientY;dragAction(t,{x:e-i,y:o-n}),e=i,o=n}}function dragMouseStop(t){console.log(store(null,!0)),document.onmouseup=null,document.onmousemove=null}function resizeable(t,e="both"){t=nj().els("#"+t),parent=re_getElementSizeAndPosition(nj(t).p()),nj(t.parentNode),t.classList.add("resizeable"),t.classList.add("resizePoint"),"both"===e&&(nj(t).aCl("resBoth"),nj(t).sty({left:parseInt(parent.width)-20+"px",top:parseInt(parent.height)+"px"})),t.onmousedown=function(){1==event.which&&re_trackMouseDragPlusAction({action:"drag",param:[t]})}}function re_getDragNewPosition(t){let e=re_getElementOffsetAndMeasures(t),o={x:e.left-t.x,y:e.top-t.y};return re_preventDragOutsideScreen(e,o,{left:o.x,top:o.y,right:o.x+e.width,bottom:o.y+e.height})}function re_getElementOffsetAndMeasures(t){return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth}}function re_preventDragOutsideScreen(t,e,o){let i=re_getDocumentBodyLimits();return o.left<i.left&&(e.x=t.left),o.top<i.top&&(e.y=t.top),o.right>i.right&&(e.x=t.left),o.bottom>i.bottom&&(e.y=t.top),e}function re_dragAction(t,e){re_getDragNewPosition(t.param[0],e);let o=re_getElementSizeAndPosition(t.param[0].parentNode),i=store(null,!0);nj(t.param[0]).sty({left:i.mPosX-parseInt(o.left)+"px",top:i.mPosY-parseInt(o.top)+"px"});let n=nj().els("#"+t.param[0].id).parentNode;nj(n).sty({width:parseInt(i.mPosX)-parseInt(o.left)+20+"px",height:parseInt(i.mPosY)-parseInt(o.top)+20+"px"});let r=nj(nj().els("#"+t.param[0].id)).gRe();parseInt(re_getElementSizeAndPosition(nj().els("#"+t.param[0].id).previousSibling).height);let l=parseInt(r.top),s=l-parseInt(o.top)-38-40;console.log(l,o.height,38,s),nj(nj().els("#"+t.param[0].id).previousSibling.previousSibling).sty("height",s+"px")}function re_getElementSizeAndPosition(t){let e=window.getComputedStyle(t);return{width:e.getPropertyValue("width"),height:e.getPropertyValue("height"),top:e.getPropertyValue("top"),left:e.getPropertyValue("left"),gridCol:e.getPropertyValue("grid-template-columns"),gridRow:e.getPropertyValue("grid-template-rows")}}function re_getDocumentBodyLimits(){return{left:0,right:document.body.clientWidth,top:0,bottom:document.body.clientHeight}}function re_trackMouseDragPlusAction(t){let e=event.clientX,o=event.clientY;document.onmouseup=re_dragMouseStop,document.onmousemove=function(){let i;store({mPosX:event.clientX,mPosY:event.clientY,elOffsetX:e,elOffsetY:o}),re_dragAction(t)}}function re_dragMouseStop(t){document.onmouseup=null,document.onmousemove=null}